<DOCTYPE! html>

<html>
  <script type="text/javascript">
  const en_us = new Map();
  const not_en_us = new Map();
    
  function fill_map (let map, let file) {
    fetch(file)
        .then((res) => {
          console.log(res);
          return res.json();
        }).then((data) => {
          console.log(data);
          console.log(data["pages"]);
          console.log(data["pages"][0]);
          console.log(data["pages"][0]["page_name"]);
          for(let item in data["pages"])
          {
            map.set(data["pages"][item]["page_name"], data["pages"][item]["page_link"]);
          }
        });
  }

    fill_map(en_us, "./language_files/en_us.json");
    fill_map(not_en_us, "./language_files/not_en_us.json");
  </script>
  <head>
    <title>Link Navigation Test</title>
  </head>
  <body>
    <div>
      <p>
        *Screaming 5.0*
      </p>
    </div>
    <div>
       <select name="Languages" id="lang" required=true>
         <option value="en_us">en_us</option>
         <option value="not_en_us">en_usn't</option>
       </select>
       <button onclick = "navigation_function()">Zoom!</button>
    </div>
  </body>
  <script type="text/javascript">
    function navigation_function () {
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      const doc = urlParams.get('document_title')

      if(document.getElementById("lang").value == "en_us")
      {
        window.location.href = en_us.get(doc);
      } else if (document.getElementById("lang").value == "not_en_us")
      {
        window.location.href = not_en_us.get(doc);
      }
    }
  </script>
</html>
